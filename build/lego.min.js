!function(t){var n={extend:function(t,n,e){t.prototype=Object.create(n.prototype,e),t.superClass=n},merge:function(t,n){for(var e in n)t[e]=n[e]}};t.lego=n}(this),function(){var t={create:function(){return[0,0,0]}};lego.Vector3=t}(this),function(){var t=lego.Vector3,n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e={create:function(){return n.concat()},clone:function(t){return t.concat()},setIdentity:function(t){this.set(t,n)},set:function(t,n){for(var e=0;16>e;e++)t[e]=n[e]},concat:function(t,n){var e,i,r,o,c,s,a,h;for(i=t,r=t,o=n,i===o&&(o=this.clone(i)),e=0;4>e;e++)c=r[e],s=r[e+4],a=r[e+8],h=r[e+12],i[e]=c*o[0]+s*o[1]+a*o[2]+h*o[3],i[e+4]=c*o[4]+s*o[5]+a*o[6]+h*o[7],i[e+8]=c*o[8]+s*o[9]+a*o[10]+h*o[11],i[e+12]=c*o[12]+s*o[13]+a*o[14]+h*o[15]},multiplyVector3:function(n,e){var i=t.create();return i[0]=e[0]*n[0]+e[1]*n[4]+e[2]*n[8]+n[11],i[1]=e[0]*n[1]+e[1]*n[5]+e[2]*n[9]+n[12],i[2]=e[0]*n[2]+e[1]*n[6]+e[2]*n[10]+n[13],i},transpose:function(t){var n;n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n},setScale:function(t,n,e,i){t[0]=n,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=e,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=i,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1},scale:function(t,n,e,i){t[0]*=n,t[4]*=e,t[8]*=i,t[1]*=n,t[5]*=e,t[9]*=i,t[2]*=n,t[6]*=e,t[10]*=i,t[3]*=n,t[7]*=e,t[11]*=i},setTranslate:function(t,n,e,i){t[0]=1,t[4]=0,t[8]=0,t[12]=n,t[1]=0,t[5]=1,t[9]=0,t[13]=e,t[2]=0,t[6]=0,t[10]=1,t[14]=i,t[3]=0,t[7]=0,t[11]=0,t[15]=1},translate:function(t,n,e,i){t[12]+=t[0]*n+t[4]*e+t[8]*i,t[13]+=t[1]*n+t[5]*e+t[9]*i,t[14]+=t[2]*n+t[6]*e+t[10]*i,t[15]+=t[3]*n+t[7]*e+t[11]*i},setRotate:function(t,n,e,i,r){var o,c,s,a,h,u,l,f,v,d,p;n=Math.PI*n/180,o=Math.sin(n),c=Math.cos(n),0!==e&&0===i&&0===r?(0>e&&(o=-o),t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=c,t[9]=-o,t[13]=0,t[2]=0,t[6]=o,t[10]=c,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1):0===e&&0!==i&&0===r?(0>i&&(o=-o),t[0]=c,t[4]=0,t[8]=o,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=-o,t[6]=0,t[10]=c,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1):0===e&&0===i&&0!==r?(0>r&&(o=-o),t[0]=c,t[4]=-o,t[8]=0,t[12]=0,t[1]=o,t[5]=c,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1):(s=Math.sqrt(e*e+i*i+r*r),1!==s&&(a=1/s,e*=a,i*=a,r*=a),h=1-c,u=e*i,l=i*r,f=r*e,v=e*o,d=i*o,p=r*o,t[0]=e*e*h+c,t[1]=u*h+p,t[2]=f*h-d,t[3]=0,t[4]=u*h-p,t[5]=i*i*h+c,t[6]=l*h+v,t[7]=0,t[8]=f*h+d,t[9]=l*h-v,t[10]=r*r*h+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1)},rotate:function(t,n,e,i,r){var o=this().create();this.setRotate(n,e,i,r),this.concat(t,o)}};lego.Matrix4=e}(this),function(t){var n=t.lego,e=function(t){this.x=0,this.y=0,this.z=0,this.pivotX=0,this.pivotY=0,this.pivotZ=0,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.alpha=1,this.visible=!0,this.parent=null,this.children=[],n.merge(this,t)};e.prototype={constructor:e,addChild:function(t){t.removeFromParent(),this.children.indexOf(t)<0&&(this.children.push(t),t.parent=this)},removeChild:function(t){var n=this.children.indexOf(t);n>-1&&(t.parent=null,this.children.splice(n,1))},removeFromParent:function(){var t=this.parent;t&&t.removeChild(this)},render:function(t){var n=this.children;this.onUpdate&&this.onUpdate(t),this._render();for(var e=0,i=n.length;i>e;e++){var r=n[e];r.render(t)}},_render:function(){}},n.View=e}(this),function(t){var n=t.lego,e=(n.View,function(t){n.merge(this,t)});n.Stage=e}(this);